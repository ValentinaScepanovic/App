<div class="header" *ngIf="!loading">
<h1 class="H1">Books</h1>
<button type="button" class="button add" (click)="form()">Add Books</button>
</div>
<div class="loader" *ngIf="loading"></div>
<div *ngIf="!loading">
<table > 
  <tbody>
  <tr *ngFor="let book of books">
    <td class="tdImg"> <img class="img" [src]="book.picture"> </td>
    <td class="tdStyle">{{book.bookName}}</td>
    <td class="tdStyle">{{book.author}}</td>
    <td class="tdStyle">{{book.genre}}</td>
    <td class="tdButtom"><button type="button" class="button" (click)="formEdit(book.bookId)">Edit Book</button>
    </td>
    <td class="tdButtom"><button type="button" class="button" (click)="formDelete(book.bookId)">Delete Book</button></td>
    </tr>
</tbody>
</table>
</div>
<form #newbook="ngForm" class="form" *ngIf="formVisible">
    <div class="form-content">
      <div class="form-header">
        <h2>Add New Book!</h2>
        <button class="close" class="button" (click)="form()">&times;</button>
      </div>
      <div class="form-body">
        <div>
          <label for="bookName">Book name:</label>
          <br>
          <input type="text" name="bookName" class="input" [(ngModel)]="newBook.bookName" 
          required placeholder="Enter book name">
        </div>
        <br>
        <div>
          <label for="author">Author:</label>
          <br>
          <input type="text" name="author" class="input" [(ngModel)]="newBook.author" 
          required placeholder="Enter author name">
        </div>
        <br>
        <div>
         <label for="genre">Genre:</label>
         <br>
         <select name="genre" id="genre" class="input" [(ngModel)]="newBook.genre" required>
          <option value="Fantasy">Fantasy</option>
          <option value="Novel">Novel</option>
          <option value="Fiction">Fiction</option>
          <option value="Mystery">Mystery</option>
          <option value="Romance">Romance</option>
          </select>
        </div>
        <br>
        <div>
            <label for="pictures">Select a Picture:</label>
            <br>
            <input type="file" id="picture" name="picture" (change)="onFileSelected($event)"/>
            <label class="button" for="picture">Choose File</label>
        </div>
      </div>
      <br>
      <div class="form-footer">
        <button type="button" class="button" (click)="onSubmit()" [disabled]="!newbook.valid">Save Book</button>
        <button type="button" class="button" (click)="form()"> Close </button>
    </div>
    </div>
</form>

<form #edit="ngForm" class="form" *ngIf="formEditVisible">
  <div class="form-content">
    <div class="form-header">
      <h2>Edit Book!</h2>
      <button class="close" class="button" (click)="closeEdit()">&times;</button>
    </div>
    <div class="form-body">
      <div>
        <label for="bookName">Book name:</label>
        <br>
        <input type="text" name="bookName" class="input" [(ngModel)]="editBook.bookName" required>
      </div>
      <br>
      <div>
        <label for="author">Author:</label>
        <br>
        <input type="text" name="author" class="input" [(ngModel)]="editBook.author" required>
      </div>
      <br>
      <div>
       <label for="ganre">Genre:</label>
       <br>
       <select name="genre" id="genre" class="input" [(ngModel)]="editBook.genre" required>
        <option value="Fantasy">Fantasy</option>
        <option value="Novel">Novel</option>
        <option value="Fiction">Fiction</option>
        <option value="Mystery">Mystery</option>
        <option value="Romance">Romance</option>
        </select>
      </div>
      <br>
      <div>
          <label for="picture">Select a Picture:</label>
          <br>
          <input type="file" id="picture" name="picture" (change)="onFileSelected($event)"/>
      </div>
    </div>
    <br>
    <div class="form-footer">
      <button type="button" class="button" (click)="editThisBook(editBook.bookId)"[disabled]="!edit.valid">Edit Book</button>
      <button type="button" class="button" (click)="closeEdit()"> Close </button>
  </div>
  </div>
</form>

<form #deleteBook="ngForm" class="form" *ngIf="formDeleteVisible">
  <div class="form-content">
    <div class="form-header">
      <h2>Delete Book!</h2>
      <button class="close" class="button" (click)="closeDelete()">&times;</button>
    </div>
    <div class="form-body">
      <p> Are you sure you wanna delete this book?</p>
    </div>
    <br>
    <div class="form-footer">
      <button type="button" class="button" (click)="deleteThisBook()">Delete</button>
      <button type="button" class="button" (click)="closeDelete()"> Close </button>
  </div>
  </div>
</form>
